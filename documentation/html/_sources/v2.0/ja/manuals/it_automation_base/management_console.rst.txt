==============
管理コンソール
==============

はじめに
========

| 本書は、ITAシステムの管理コンソールの概要および操作方法について記載したものです。

概要
====

| 管理コンソールでは、初期メニュー以外に、利用部門が独自の情報をITAのデータベース上で管理する場合、管理レベルにあった個別メニューの作成が出来ます。
| 個別メニューの登録／変更／削除をご使用される際は、製品サポートへお問い合わせ下さい。

.. table:: Webコンテンツメニュー/画面一覧
   :align: left

   +----------+------------------------+-----------------------------+
   | **No.**  | **メニューグループ**   |  **メニュー・画面**         |
   |          |                        |                             |
   +==========+========================+=============================+
   | 1        | ITA管理コンソール      | メインメニュー              |
   +----------+                        +-----------------------------+
   | 2        |                        | システム設定                |
   +----------+                        +-----------------------------+
   | 3        |                        | メニューグループ管理        |
   +----------+                        +-----------------------------+
   | 4        |                        | メニュー管理                |
   +----------+                        +-----------------------------+
   | 5        |                        | ロール・メニュー紐付管理    |
   +----------+------------------------+-----------------------------+


画面説明
========

| 管理コンソールの画面について説明します。

DashBoard
---------

| DashBoardにはメニューグループの一覧が表示されます。

.. figure:: /images/ja/management_console/menu_group_list/DashBoard.png
   :alt: DashBoard
   :width: 800px
   :align: center

管理コンソールへのアクセス方法
------------------------------

| ログインに成功したITAはメインメニューに遷移します。
| メインメニューのDashBoardから管理コンソールを選ぶことで、管理コンソールへ遷移出来ます。
| 左側のメニューグループタブから管理コンソールを選ぶことで、管理コンソール内のメニューを指定して遷移することも出来ます。

.. figure:: /images/ja/management_console/menu_group_list/MainMenu.gif
   :alt: メインメニュー
   :width: 800px
   :align: center

画面構成
--------

| ITAシステムが提供する各メニュー画面は基本的に同じ要素で構成されています。
| その構成要素は次の通りです。

.. figure:: /images/ja/diagram/画面構成.png
   :alt: 画面構成
   :align: center
   :width: 800px

   画面構成

.. table:: 画面構成一覧
   :align: Left

   +---------+------------+------------------------------------------------------+
   | **No.** | **画面名** | **説明**                                             |
   |         |            |                                                      |
   +=========+============+======================================================+
   | 1       | メニュー名 | 現在表示しているメニュー名が表示されます。           |
   +---------+------------+------------------------------------------------------+
   | 2       | メニュー   | 操作/表示可能なメニューグループが\                   |
   |         |            | リストとして表示されます。\                          |
   |         |            | また、現在のメニューグループで、\                    |
   |         |            | 操作/表示可能なメニューがリストとして表示されます。\ |
   +---------+------------+------------------------------------------------------+
   | 3       | サブ\      | 各メニューに対応する登録、設定などを行う部分です。\  |
   |         | メニュー   | ※詳細は後述します。                                  |
   +---------+------------+------------------------------------------------------+
   | 4       | ログイン\  | 現在ログインしているアカウント名が表示されます。     |
   |         | 情報       | クリックすると、ワークスペースの切替処理や\          |
   |         |            | 所属しているロールの確認、インストールされている\    |
   |         |            | ITAとドライバのバージョン確認\                       |
   |         |            | 、ログアウト処理操作が可能です。                     |
   +---------+------------+------------------------------------------------------+

各メニュー共通操作
==================

| 各メニュー操作部共通の操作方法を説明します。
| 各メニュー個別の情報は\ :ref:`各メニュー個別情報<menu_unique_operation>`\からそれぞれのメニューを参照して下さい。

一覧タブ
--------

| 登録されている項目の確認や登録/更新/廃止/復活を行うことが出来ます。

- | **登録**
  | 各メニューに対して、新規に項目を登録します。
  | 登録内容は各メニューによって異なりますので、各利用手順マニュアルを参照して下さい。
  | エクセル形式、JSON形式のファイルを使用する一括登録については「\ :ref:`management_console_download_all_and_edit_file_uploads`\ 」をご確認下さい。

  .. figure:: /images/ja/management_console/menu_group_list/menu_register.gif
     :alt: メインメニュー
     :width: 800px
     :align: center

  #. 「一覧」タブ内上部の \ :guilabel:`登録`\  をクリックして登録/編集画面に遷移します。
  #. 必要な情報を入力し、「一覧」タブ内上部の \ :guilabel:`編集確認`\  をクリックすると編集確認画面が表示されます。
  #. \ :guilabel:`編集反映`\  をクリックして更新します。

  .. note:: | **登録時のボタンについて**

              - | \ :guilabel:`追加`\
                | 新規登録用のレコードが追加されます。
                | 複数件を同時に登録したい場合に使用します。
              - | \ :guilabel:`複製`\
                | チェックを付けたレコードが複製されます。
                | 手順については「\ :ref:`複製<duplicate>`\ 」をご確認下さい。
              - | \ :guilabel:`削除`\
                | チェックを付けたレコードが削除されます。

  .. note:: | **プルダウンによる入力項目について**
            | 登録/更新時の入力項目で、プルダウンによる選択が可能な項目は、以下の仕様となっています。

            .. figure:: /images/ja/management_console/menu_group_list/プルダウンによる入力項目.gif
               :alt:  プルダウンによる入力項目
               :align: center
               :width: 6in

            #. | 検索窓が表示されます。
               | 検索したい語句を入力することにより、選択項目を絞り込むことが出来ます。
               | 部分一致検索で、大文字と小文字、全角と半角は補正検索されます。
            #. | 選択項目が表示されます。


- | **表示フィルタ**
  | 各メニューで登録されている項目を表示するための検索条件を指定します。
  | 検索条件、検索項目はメニューごとに異なります。ここでは共通機能について説明します。
  | 「一覧」タブ内右上の \ :guilabel:`フィルタ|開く/閉じる`\  をクリックすることで表示／非表示の切替が可能です。

  .. figure:: /images/ja/management_console/menu_group_list/表示フィルタ画面.gif
     :alt: 表示フィルタ画面
     :align: center
     :width: 800px

  #. | 廃止カラム
     | 初期状態では、「廃止含まず」がセットされています。
     | 他に「全レコード」、「廃止のみ」が任意操作で選択可能であり、希望表示方法を指定します。
     | **必ずいずれかの選択が必須**\ です。
  #. | 検索条件
     | 検索する条件を指定します。
     | システム名や備考などにおいて、文字指定が出来る項目については「あいまい検索」or「プルダウン検索」でフィルタすることが出来ます。
  #. | オートフィルタ
     | オートフィルタをチェックしておくと、フィルタ条件を選択するごとに条件に合った一覧を自動で表示します。
     | 画面表示時のチェック有無は、管理コンソール「メニュー管理」の「オートフィルタチェック」で設定可能です。
  #. | カラム説明 (Description)
     | カーソルを合わせると該当する列の説明文がポップアップ表示されます。
  #. | フィルタ
     | 検索条件を手入力およびプルダウンメニューから選択し、Enterキーまたは\ :guilabel:`フィルタ`\ をクリックすると登録情報が表示されます。
  #. | Excelダウンロード
     | 検索条件に一致した項目の一覧をエクセル形式でダウンロード出来ます。
  #. | JSONダウンロード
     | 検索条件に一致した項目の一覧をJSON形式でダウンロード出来ます。

  .. note:: | 表示フィルタからダウンロードしたExcel形式ファイルとJSON形式ファイルは「\ :ref:`全件ダウンロード・ファイル一括登録<management_console_download_all_and_edit_file_uploads>`\ 」で使用することが出来ます。

- | **編集**
  | 登録されている項目の更新を行います。
  | 編集内容は各メニューによって異なりますので、各利用手順マニュアルを参照して下さい。

  .. figure:: /images/ja/management_console/menu_group_list/menu_update.gif
     :alt: 編集の操作
     :align: center
     :width: 800px

  #. | 対象項目の \ :guilabel:`…`\  > \ :guilabel:`編集`\  を順にクリックして登録/編集画面に遷移します。
     | もしくは、対象項目にチェックを入れ、「一覧」タブ内上部の \ :guilabel:`編集`\  をクリックします。
     | チェックを入れずに「一覧」タブ内上部の \ :guilabel:`編集`\  をクリックすると表示されているすべての項目が編集対象となります。
  #. | 更新する情報を入力し、「一覧」タブ内上部の \ :guilabel:`編集確認`\  をクリックすると編集確認画面が表示されます。
  #. | \ :guilabel:`編集反映`\  をクリックして更新します。

  .. note:: | **編集時のボタンについて**

              - | \ :guilabel:`追加`\
                | 新規登録用のレコードが追加されます。
                | 複数件を同時に登録したい場合に使用します。
              - | \ :guilabel:`複製`\
                | チェックを付けたレコードが複製されます。
                | 手順については「\ :ref:`複製<duplicate>`\ 」をご確認下さい。
              - | \ :guilabel:`削除`\
                | チェックを付けたレコードが削除されます。
              - | \ :guilabel:`廃止`\
                | チェックを付けたレコードの廃止フラグがTrueになります。
                | 更新後に廃止となります。

.. _Duplicate:

- | **複製**
  | 登録されている項目の情報を転用して登録することが可能です

  #. | 対象項目の \ :guilabel:`…`\  > \ :guilabel:`複製`\  を順にクリックして登録/編集画面に遷移します。
     | もしくは、対象項目にチェックを入れ、「一覧」タブ内上部の \ :guilabel:`編集`\  をクリックします。
     | 登録/編集画面に遷移したら \ :guilabel:`複製`\  をクリックします。
  #. | 対象項目の値を反映した状態の新規登録用レコードが表示されます。

  .. figure:: /images/ja/management_console/menu_group_list/menu_copy.gif
     :alt: 編集の操作
     :align: center
     :width: 800px

  .. warning:: - | 対象項目がパスワード項目の場合、複製処理は行われません。

変更履歴タブ
------------
| 各メニューで、登録した項目の変更履歴を表示することが出来ます。

- | **変更履歴の確認**

  #. | 各メニューの主キーを指定することで、対応する項目の変更履歴を表示することが出来ます。
     | もしくは、「一覧」タブの対象項目の \ :guilabel:`…`\  > \ :guilabel:`履歴`\  を順にクリックすると変更履歴を表示することが出来ます。
  #. | 変更実施日時が新しい順に一覧表示され、前回との変更箇所がオレンジ色太文字で表示されます。

  .. figure:: /images/ja/management_console/menu_group_list/変更履歴操作.gif
     :alt: 変更履歴の操作
     :width: 800px
     :align: center

- | **プルダウン選択を含んだ場合の変更履歴について**
  | 「プルダウン選択」の参照元を変更した場合、参照側の値も自動的に変更されます。
  | 「変更履歴」は、値を編集（登録/更新/廃止/復活）した時点の値が表示されます。
  | 以下、例を用いて説明します。

  | 例：パラメータシート「ぱらむ001」の項目「ぱらむB」が「マスタ001」の項目「マスタ」を参照している場合

  #. | 事前準備として、メニュー作成メニューグループ>メニュー定義・作成メニューで以下のデータシートとパラメータシートを作成します。

     - | データシート「マスタ001」

       .. figure:: /images/ja/menu_creation/menu_definition_and_create/データシート「マスタ001」.png
          :alt: 「メニュー定義・作成」メニューで作成したデータシート
          :align: center
          :width: 6in

          「メニュー定義・作成」メニューで作成したデータシート

     - | パラメータシート「ぱらむ001」

       .. figure:: /images/ja/management_console/menu_group_list/パラメータシート「ぱらむ001」.png
          :alt: 「メニュー定義・作成」メニューで作成したパラメータシート
          :align: center
          :width: 6in

          「メニュー定義・作成」メニューで作成したパラメータシート

  #. | 入力用メニューグループ>マスタ001メニューからパラメータ「マスタ」に値「mas1-1」を登録します。
  #. | 入力用メニューグループ>ぱらむ001メニューから1件登録します。
  #. | 入力用メニューグループ>マスタ001メニューからパラメータ「マスタ」の値を編集し「mas1-2」で更新を行います。
  #. | 入力用メニューグループ>マスタ001メニューからパラメータ「マスタ」の値を編集し「mas1-3」で更新を行います。
  #. | 入力用メニューグループ>ぱらむ001メニューから先ほど登録した対象の「ぱらむA」を編集し、更新を行います。

     .. figure:: /images/ja/management_console/menu_group_list/プルダウン選択を含んだ変更履歴の操作.gif
        :alt: プルダウン選択を含んだ変更履歴の操作
        :align: center
        :width: 800px

  #. | 入力用メニューグループ>マスタ001メニューからパラメータ「マスタ」の値を編集し「mas1-4」で更新を行います。
  #. | 入力用メニューグループ>マスタ001メニューからパラメータ「マスタ」の値を編集し「mas1-5」で更新を行います。
  #. | 入力用メニューグループ>ぱらむ001メニューから先ほど登録した対象の「ぱらむA」を編集し、更新を行います。

  #. | 以下のような結果になります。

  .. figure:: /images/ja/management_console/menu_group_list/マスタ001変更履歴.png
     :alt:  データシート「マスタ001」の変更履歴
     :align: center
     :width: 5in

     データシート「マスタ001」の変更履歴

  .. figure:: /images/ja/management_console/menu_group_list/ぱらむ001変更履歴.png
     :alt:  パラメータシート「ぱらむ001」の変更履歴
     :align: center
     :width: 5in

     パラメータシート「ぱらむ001」の変更履歴

.. _management_console_download_all_and_edit_file_uploads:

全件ダウンロード・ファイル一括登録
----------------------------------
| 各メニュー画面に登録されている情報を一括してエクセル形式またはJSON形式でダウンロードすることが出来ます。
| また、同じ形式のファイルで、一括して情報を登録することが出来ます。

.. tabs::

   .. tab:: Excel

      .. figure:: /images/ja//management_console/menu_group_list/file_all_register.gif
         :alt: ファイル一括登録の操作(Excel)
         :align: center
         :width: 800px

      #. | 目的に合ったファイルをダウンロードします。
         
         - | 登録されている情報の更新/廃止/復活を行う場合は \ :guilabel:`全件ダウンロード(Excel)`\ をクリックし、ファイルをダウンロードして下さい。
         - | 新規に登録を行う場合は \ :guilabel:`新規登録用ダウンロード(Excel)`\  をクリックしてファイルをダウンロードして下さい。
      #. | ダウンロードしたファイルを編集し、保存して下さい。
         | 編集内容は各メニューによって異なりますので、各利用手順マニュアルを参照して下さい。
      #. | 作成したファイル形式に合った \ :guilabel:`ファイル一括登録`\  をクリックし、対象のファイルを選択して \ :guilabel:`一括登録開始`\  をクリックして下さい。

      .. warning:: |  \ :guilabel:`変更履歴全件ダウンロード(Excel)`\  からダウンロードできるファイルは一括登録に使用することが出来ません。
         | 「実行処理種別」が未選択および正しい処理種別を選択していない場合、登録が実行されません。

   .. tab:: JSON

      .. figure:: /images/ja//management_console/menu_group_list/json_register.gif
         :alt: ファイル一括登録の操作(JSON)
         :align: center
         :width: 800px

      #. | 目的に合ったファイルをダウンロードします。
         
         - | 登録されている情報の更新/廃止/復活を行う場合は \ :guilabel:`全件ダウンロード(JSON)`\ をクリックし、ファイルをダウンロードして下さい。
         - | 新規に登録を行う場合も \ :guilabel:`全件ダウンロード(JSON)`\  をクリックしてファイルをダウンロードして下さい。
      #. | ダウンロードしたファイルを編集し、保存して下さい。
         | 編集内容は各メニューによって異なりますので、各利用手順マニュアルを参照して下さい。
      #. | 作成したファイル形式に合った \ :guilabel:`ファイル一括登録`\  をクリックし、対象のファイルを選択して \ :guilabel:`一括登録開始`\  をクリックして下さい。

.. _menu_unique_operation:

各メニュー個別情報
==================

| 各メニュー個別の情報を説明します。

システム設定
------------

| ITAシステム導入・運用時に設定すべき各種情報の更新を行います。

.. table:: システム設定
   :align: Left

   +---------+--------------------+-----------------------------------------+
   | **No.** | **項目名**         | **説明**                                |
   +=========+====================+=========================================+
   | 1       | 識別ID             | システム設定識別用のIDです。            |
   +---------+--------------------+-----------------------------------------+
   | 2       | 項目名             | システム設定の項目名です。              |
   +---------+--------------------+-----------------------------------------+
   | 3       | 設定値             | ファイルアップロードを禁止する拡張子を\ |
   |         |                    | セミコロン区切りで設定できます。　      |
   +---------+--------------------+-----------------------------------------+
   | 4       | 備考               | 自由記述欄です。                        |
   +---------+--------------------+-----------------------------------------+
   
.. danger::
   | 「識別ID」は変更しないで下さい。ITAの動作が保証されません。

.. warning::
   - | 拡張子は半角セミコロン区切りで入力して下さい。
   - | アップロード禁止拡張子の許可を増やすと、セキュリティホールになる可能性があります。

.. note::
   | 「備考」は任意です。

メニューグループ管理
--------------------

| メニュー（子）はメニューグループ（親）に属します。この画面では親となるメニューグループの登録／更新／廃止を行います。

.. table:: メニューグループ管理
   :align: Left

   +---------+--------------------+---------------------------------------------------------+
   | **No.** | **項目名**         | **説明**                                                |
   +=========+====================+=========================================================+
   | 1       | メニューグループ\  | メニューグループのIDです。                              |
   |         | ID                 |                                                         |
   +---------+--------------------+---------------------------------------------------------+
   | 2       | 親メニューグルー\  | 親のメニューグループを設定できます。                    |
   |         | プ                 |                                                         |
   +---------+--------------------+---------------------------------------------------------+
   | 3       | メニューグループ\  | 日本語のメニューグループ名を設定できます。              |
   |         | 名(ja)             |                                                         |
   +---------+--------------------+---------------------------------------------------------+
   | 4       | メニューグループ\  | 英語のメニューグループ名を設定できます。                |
   |         | 名(en)             |                                                         |
   +---------+--------------------+---------------------------------------------------------+
   | 5       | パネル画像         | メニューグループのパネル画像を設定できます。\           |
   +---------+--------------------+---------------------------------------------------------+
   | 6       | メニュー作成利用\  | メニュー作成機能の「対象メニューグループ」として利用可\ |
   |         | フラグ             | 能かどうかのフラグを設定できます。                      |
   +---------+--------------------+---------------------------------------------------------+
   | 7       | 表示順序           | DashBoardでのメニューグループの表示順序を設定できます\  |
   |         |                    | 。                                                      |
   +---------+--------------------+---------------------------------------------------------+
   | 8       | 備考               | 自由記述欄です。                                        |
   +---------+--------------------+---------------------------------------------------------+

.. warning::
   - | データ更新系の操作のため、システム管理者でログインして下さい。
   - | メニューグループ名称は、\ **一意**\ である必要があります。
   - | メニューグループ名称は重複登録出来ません。
   - | 「表示順序」の昇順にメインメニューに表示されます。「表示順序」が同じ場合は、「メニューグループID」の昇順で表示されます。
   - | 「パネル用画像」に使用出来るのは\ **PNGファイルのみ**\ です。

.. note::
   | 「備考」は任意です。

.. _menu_list:

メニュー管理
------------

| この画面でコンテンツの機能（メニュー）の登録／更新／廃止を行います。

.. table:: メニュー管理
   :align: Left

   +---------+--------------------+---------------------------------------------------------+
   | **No.** | **項目名**         | **説明**                                                |
   +=========+====================+=========================================================+
   | 1       | メニューID         | メニューのIDです。                                      |
   +---------+--------------------+---------------------------------------------------------+
   | 2       | メニューグループ   | 親となるメニューグループを設定できます。                |
   +---------+--------------------+---------------------------------------------------------+
   | 3       | メニュー名(ja)     | 日本語のメニュー名を設定できます。                      |
   +---------+--------------------+---------------------------------------------------------+
   | 4       | メニュー名(en)     | 英語のメニュー名を設定できます。                        |
   +---------+--------------------+---------------------------------------------------------+
   | 5       | メニュー名(rest)   | restでのメニュー名を設定できます。                      |
   +---------+--------------------+---------------------------------------------------------+
   | 6       | メニュー\          | メニューグループのサブメニューで表示する順序を設定でき\ |
   |         | グループ内表示順序 | ます。                                                  |
   +---------+--------------------+---------------------------------------------------------+
   | 7       | オートフィルタ\    | メニュー表示時に「オートフィルタ」の\                   |
   |         | チェック           | チェックボックスにチェックを入れるかどうか設定できます。|
   +---------+--------------------+---------------------------------------------------------+
   | 8       | 初回フィルタ       | メニュー表示時に「フィルタ」を\                         |
   |         |                    | クリックした状態で表示するかどうか設定できます。        |
   +---------+--------------------+---------------------------------------------------------+
   | 9       | Web表示最大行数    | 「一覧」に表示する最大行数を設定できます。              |
   +---------+--------------------+---------------------------------------------------------+
   | 10      | Web表示前確認行数  | 「一覧」に出力する前に\                                 |
   |         |                    | 確認ダイアログを表示する最大行数を設定できます。        |
   +---------+--------------------+---------------------------------------------------------+
   | 11      | Excel出力最大行数  | Excel出力する最大行数を設定できます。                   |
   +---------+--------------------+---------------------------------------------------------+
   | 12      | ソートキー         | 「一覧」に表示する並び順を設定できます。                |
   +---------+--------------------+---------------------------------------------------------+

.. warning::
   - | メニュー名称は\ **一意**\ である必要があります。
   - | ソートキーはJSON形式の表記で設定する必要があります。

.. note::
   - | Excel出力最大行数は0～1048576まで設定可能です。
   - | ソートキーは項目名にASC/DESC、値にキーとなるカラム名を入力して下さい。例）　{"ASC":"display_order"}  
   - | 「備考」は任意です。

| 「Web表示最大行数」と「Web表示前確認行数」には次のような関係があります。

.. figure:: /images/ja/diagram/Web表示最大行数の処理概要.png
   :alt:  Web表示最大行数の処理概要
   :align: center
   :width: 6in

   Web表示最大行数の処理概要
   
| 「各メニュー項目一覧」または「各メニュー項目一覧の全履歴数」が「Excel出力最大行数」を超えている場合、
| 「全件ダウンロード・ファイル一括登録」タブでのエクセル形式のファイルダウンロードは中止されます。
| JSON形式のファイルはダウンロードが可能です。
| 画面下部の変更履歴全件ダウンロードは出力し確認する用途で、アップロードには対応しておりません。

ロール・メニュー紐付管理
------------------------

| 各メニューとロール対応付けの登録／更新／廃止を行います。

| Exastro Platform「ロール管理」で登録したロールと「:ref:`menu_list`」で登録したメニューがリストボックスに表示されるので（下図 ①,②）、それぞれを選択し、紐付タイプ（下図 ③）を選択します。

.. figure:: /images/ja/management_console/role_menu_link_list/ロール・メニュー紐付管理_設定画面.png
   :alt:  グループメニュー権限の設定画面（ロール・メニュー紐付管理）
   :align: center
   :width: 5in

.. warning::
   | ロールに紐付かないメニュー画面はメニューグループに表示されません。

.. table:: ロール・メニュー紐付管理
   :align: Left

   +---------+--------------------+--------------------------------------------+
   | **No.** | **項目名**         | **説明**                                   |
   +=========+====================+============================================+
   | 1       | UUID               | ロール・メニュー紐付管理のIDです。         |
   +---------+--------------------+--------------------------------------------+
   | 2       | ロール             | 紐付けるロールを設定できます。             |
   +---------+--------------------+--------------------------------------------+
   | 3       | メニュー           | 紐付けるメニューを設定できます。           |
   +---------+--------------------+--------------------------------------------+
   | 4       | 紐付               | ロールに対してメニューをメンテナンス可\    |
   |         |                    | 能にするか閲覧のみにするかを設定できます。 |
   +---------+--------------------+--------------------------------------------+
   | 5       | 備考               | 自由記述欄です。                           |
   +---------+--------------------+--------------------------------------------+

.. note::
   | 「備考」は任意です。

